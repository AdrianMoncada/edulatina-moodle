/**
 * JS file to handle edwiser bridge.
 *
 * @package
 * @copyright   2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>
 * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author      Wisdmlabs
 * @module      auth_edwiserbridge/edwiser_bridge
 */
define("auth_edwiserbridge/edwiser_bridge",["jquery","core/ajax","core/url","core/str"],(function($,ajax,url){return{init:function($params){$(document).ready((function(){function onRemoveHideElemnts(index){$("#id_wp_name_"+index).closest("fieldset").css("display","none")}if($('input[name^="wp_name"]').on({keydown:function(e){if(32===e.which)return!1},change:function(){this.value=this.value.replace(/\s/g,"")}}),$("[id$=_eb_test_connection]").click((function(event){event.preventDefault(),$(document.body).css({cursor:"wait"});var id=$(this).prop("id"),index=(id=(id=id.replace("eb_test_connection","")).replace("id_eb_buttons","")).replace(/\_/g,""),url=$("#id_wp_url_"+index).val(),token=$("#id_wp_token_"+index).val(),parent=$(this).parent().parent();(parent=parent.parent()).find("#eb_test_conne_response_old").css("display","none"),ajax.call([{methodname:"auth_edwiserbridge_test_connection",args:{wp_url:url,wp_token:token}}])[0].done((function(response){parent.find("#eb_test_conne_response_old").html(response.msg),parent.find("#eb_test_conne_response_old").css("display","block"),1==response.status?(parent.find("#eb_test_conne_response_old").addClass("eb-success-msg"),parent.find("#eb_test_conne_response_old").removeClass("eb-error-msg")):(parent.find("#eb_test_conne_response_old").removeClass("eb-success-msg"),parent.find("#eb_test_conne_response_old").addClass("eb-error-msg")),$(document.body).css({cursor:"default"})})).fail((function(ex){$(document.body).css({cursor:"default"})}))})),$("[id$=_eb_remove_site]").click((function(event){event.preventDefault();var id=$(this).prop("id"),index=(id=(id=id.replace("eb_remove_site","")).replace("id_eb_buttons","")).replace(/\_/g,"");$("#id_wp_url_"+index).val(""),$("#id_wp_token_"+index).val(""),$("#id_wp_name_"+index).val(""),onRemoveHideElemnts(index),$("input[name='wp_remove["+index+"]']").val("yes")})),$("input[name='wp_remove[0]']").length)for(var repeatQty=$("input[name='eb_connection_setting_repeats']").val(),i=0;i<repeatQty;i++)"yes"==$("input[name='wp_remove["+i+"]']").val()&&onRemoveHideElemnts(i);$("#id_wp_site_list").on("change",(function(){ajax.call([{methodname:"auth_edwiserbridge_get_site_data",args:{site_index:$(this).val()}}])[0].done((function(response){$("#id_course_enrollment").prop("checked",response.course_enrollment),$("#id_course_un_enrollment").prop("checked",response.course_un_enrollment),$("#id_user_creation").prop("checked",response.user_creation),$("#id_user_deletion").prop("checked",response.user_deletion),$("#id_course_creation").prop("checked",response.course_creation),$("#id_course_deletion").prop("checked",response.course_deletion),$("#id_user_updation").prop("checked",response.user_updation)})).fail((function(ex){}))}))}))}}}));

//# sourceMappingURL=edwiser_bridge.min.js.map